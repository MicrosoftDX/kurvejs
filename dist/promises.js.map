{"version":3,"sources":["promises.ts"],"names":["Kurve","Kurve.Deferred","Kurve.Deferred.constructor","Kurve.Deferred.promise","Kurve.Deferred.state","Kurve.Deferred.rejected","Kurve.Deferred.resolved","Kurve.Deferred.resolve","Kurve.Deferred.resolveWith","Kurve.Deferred.reject","Kurve.Deferred.rejectWith","Kurve.Deferred.progress","Kurve.Deferred.notify","Kurve.Deferred.notifyWith","Kurve.Deferred.checkStatus","Kurve.Deferred.then","Kurve.Deferred.wrap","Kurve.Deferred.done","Kurve.Deferred.fail","Kurve.Deferred.always","Kurve.Promise","Kurve.Promise.constructor","Kurve.Promise.then","Kurve.Promise.done","Kurve.Promise.fail","Kurve.Promise.always","Kurve.Promise.resolved","Kurve.Promise.rejected"],"mappings":"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","file":"promises.js","sourcesContent":["// Copyright (c) Microsoft. All rights reserved. Licensed under the MIT license. See full license at the bottom of this file.\r\nmodule Kurve {\r\n    // Based on https://www.npmjs.com/package/typescript-promises\r\n    export class Deferred {\r\n\r\n        private doneCallbacks: Function[] = [];\r\n        private failCallbacks: Function[] = [];\r\n        private progressCallbacks: Function[] = [];\r\n        private _state: string;\r\n        private _promise: Promise;\r\n        private _result: any[];\r\n        private _notifyContext: any;\r\n        private _notifyArgs: any[];\r\n\r\n        constructor() {\r\n            this._promise = new Promise(this);\r\n            this._state = 'pending';\r\n        }\r\n\r\n        get promise(): Promise {\r\n            return this._promise;\r\n        }\r\n\r\n        get state(): string {\r\n            return this._state;\r\n        }\r\n\r\n        get rejected(): boolean {\r\n            return this.state === 'rejected';\r\n        }\r\n\r\n        set rejected(rejected: boolean) {\r\n            this._state = rejected ? 'rejected' : 'pending';\r\n        }\r\n\r\n        get resolved(): boolean {\r\n            return this.state === 'resolved';\r\n        }\r\n\r\n        set resolved(resolved: boolean) {\r\n            this._state = resolved ? 'resolved' : 'pending';\r\n        }\r\n\r\n        resolve(...args: any[]): Deferred {\r\n            args.unshift(this);\r\n            return this.resolveWith.apply(this, args);\r\n        }\r\n\r\n        resolveWith(context: any, ...args: any[]): Deferred {\r\n            this._result = args;\r\n            this.doneCallbacks.forEach(callback => {\r\n                callback.apply(context, args);\r\n            });\r\n            this.doneCallbacks = [];\r\n            this.resolved = true;\r\n            return this;\r\n        }\r\n\r\n        reject(...args: any[]): Deferred {\r\n            args.unshift(this);\r\n            return this.rejectWith.apply(this, args);\r\n        }\r\n\r\n        rejectWith(context: any, ...args: any[]): Deferred {\r\n            this.failCallbacks.forEach(callback => {\r\n                callback.apply(context, args);\r\n            });\r\n            this.failCallbacks = [];\r\n            this.rejected = true;\r\n            return this;\r\n        }\r\n\r\n        progress(...callbacks: Function[]): Deferred {\r\n            var d = new Deferred();\r\n            if (this.resolved || this.rejected) {\r\n                callbacks.forEach(callback => {\r\n                    callback.apply(this._notifyContext, this._notifyArgs);\r\n                });\r\n                return d;\r\n            }\r\n            callbacks.forEach(callback => {\r\n                this.progressCallbacks.push(this.wrap(d, callback, d.notify));\r\n            });\r\n            this.checkStatus();\r\n            return d;\r\n        }\r\n\r\n        notify(...args: any[]): Deferred {\r\n            args.unshift(this);\r\n            return this.notifyWith.apply(this, args);\r\n        }\r\n\r\n        notifyWith(context: any, ...args: any[]): Deferred {\r\n            if (this.resolved || this.rejected) {\r\n                return this;\r\n            }\r\n            this._notifyContext = context;\r\n            this._notifyArgs = args;\r\n            this.progressCallbacks.forEach(callback => {\r\n                callback.apply(context, args);\r\n            });\r\n            return this;\r\n        }\r\n\r\n        private checkStatus() {\r\n            if (this.resolved) {\r\n                this.resolve.apply(this, this._result);\r\n            } else if (this.rejected) {\r\n                this.reject.apply(this, this._result);\r\n            }\r\n        }\r\n\r\n        then(doneFilter: Function, failFilter?: Function, progressFilter?: Function): Deferred {\r\n            var d = new Deferred();\r\n            this.progressCallbacks.push(this.wrap(d, progressFilter, d.progress));\r\n            this.doneCallbacks.push(this.wrap(d, doneFilter, d.resolve));\r\n            this.failCallbacks.push(this.wrap(d, failFilter, d.reject));\r\n            this.checkStatus();\r\n            return this;\r\n        }\r\n\r\n        private wrap(d: Deferred, f: Function, method: Function): Function {\r\n            return (...args: any[]) => {\r\n                var result = f.apply(f, args);\r\n                if (result && result instanceof Promise) {\r\n                    result.then(\r\n                        () => { d.resolve(); },\r\n                        () => { d.reject(); }\r\n                    );\r\n                } else {\r\n                    method.apply(d, [result]);\r\n                }\r\n            };\r\n        }\r\n\r\n        done(...callbacks: Function[]): Deferred {\r\n            var d = new Deferred();\r\n            callbacks.forEach(callback => {\r\n                this.doneCallbacks.push(this.wrap(d, callback, d.resolve));\r\n            });\r\n            this.checkStatus();\r\n            return d;\r\n        }\r\n\r\n        fail(...callbacks: Function[]): Deferred {\r\n            var d = new Deferred();\r\n            callbacks.forEach(callback => {\r\n                this.failCallbacks.push(this.wrap(d, callback, d.reject));\r\n            });\r\n            this.checkStatus();\r\n            return d;\r\n        }\r\n\r\n        always(...callbacks: Function[]): Deferred {\r\n            var d = new Deferred();\r\n            callbacks.forEach(callback => {\r\n                this.doneCallbacks.push(this.wrap(d, callback, d.resolve));\r\n                this.failCallbacks.push(this.wrap(d, callback, d.reject));\r\n            });\r\n            this.checkStatus();\r\n            return d;\r\n        }\r\n\r\n    }\r\n\r\n    export class Promise {\r\n\r\n        constructor(private deferred: Deferred) {\r\n        }\r\n\r\n        then(doneFilter: Function, failFilter?: Function, progressFilter?: Function): Promise {\r\n            return this.deferred.then(doneFilter, failFilter, progressFilter).promise;\r\n        }\r\n\r\n        done(...callbacks: Function[]): Promise {\r\n            return (<Deferred>this.deferred.done.apply(this.deferred, callbacks)).promise;\r\n        }\r\n\r\n        fail(...callbacks: Function[]): Promise {\r\n            return (<Deferred>this.deferred.fail.apply(this.deferred, callbacks)).promise;\r\n        }\r\n\r\n        always(...callbacks: Function[]): Promise {\r\n            return (<Deferred>this.deferred.always.apply(this.deferred, callbacks)).promise;\r\n        }\r\n\r\n        get resolved(): boolean {\r\n            return this.deferred.resolved;\r\n        }\r\n\r\n        get rejected(): boolean {\r\n            return this.deferred.rejected;\r\n        }\r\n\r\n    }\r\n\r\n    export interface IWhen {\r\n        (deferred: Deferred): Promise;\r\n        (promise: Promise): Promise;\r\n        (object: any): Promise;\r\n        (...args: Deferred[]): Promise;\r\n    }\r\n\r\n    export var when: IWhen = (...args: any[]): Promise => {\r\n        if (args.length === 1) {\r\n            var arg = args[0];\r\n            if (arg instanceof Deferred) {\r\n                return (<Deferred>arg).promise;\r\n            }\r\n            if (arg instanceof Promise) {\r\n                return arg;\r\n            }\r\n        }\r\n        var done = new Deferred();\r\n        if (args.length === 1) {\r\n            done.resolve(args[0]);\r\n            return done.promise;\r\n        }\r\n        var pending = args.length;\r\n        var results = [];\r\n        var onDone = (...resultArgs: any[]) => {\r\n            results.push(resultArgs);\r\n            if (--pending === 0) {\r\n                done.resolve.apply(done, results);\r\n            }\r\n        };\r\n        var onFail = () => {\r\n            done.reject();\r\n        };\r\n        args.forEach(a => {\r\n            (<Deferred>a).then(onDone, onFail);\r\n        });\r\n        return done.promise;\r\n    };\r\n}\r\n\r\n\r\n//*********************************************************   \r\n//   \r\n//Kurve js, https://github.com/matvelloso/kurve-js\r\n//  \r\n//Copyright (c) Microsoft Corporation  \r\n//All rights reserved.   \r\n//  \r\n// MIT License:  \r\n// Permission is hereby granted, free of charge, to any person obtaining  \r\n// a copy of this software and associated documentation files (the  \r\n// \"\"Software\"\"), to deal in the Software without restriction, including  \r\n// without limitation the rights to use, copy, modify, merge, publish,  \r\n// distribute, sublicense, and/or sell copies of the Software, and to  \r\n// permit persons to whom the Software is furnished to do so, subject to  \r\n// the following conditions:  \r\n\r\n\r\n\r\n\r\n// The above copyright notice and this permission notice shall be  \r\n// included in all copies or substantial portions of the Software.  \r\n\r\n\r\n\r\n\r\n// THE SOFTWARE IS PROVIDED \"\"AS IS\"\", WITHOUT WARRANTY OF ANY KIND,  \r\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  \r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  \r\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE  \r\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION  \r\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION  \r\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.  \r\n//   \r\n//*********************************************************   \r\n"],"sourceRoot":"/source/"}